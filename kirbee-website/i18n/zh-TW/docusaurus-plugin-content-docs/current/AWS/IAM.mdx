---
id: iam
title: IAM（身份與訪問管理）
slug: /aws/iam
---
# IAM（身份與訪問管理）
結構：角色 (Role)、群組 (Group)、使用者 (User)

- 全球性服務
- 預設會創建 Root 帳戶，不應該使用或分享
- 使用者是組織內的個人，可以分組
- 群組只能包含使用者，不能包含其他群組
- 使用者不一定要屬於某個群組，也可以同時屬於多個群組

## 權限
- 使用者或群組可以分配名為策略 (Policies) 的 JSON 文件
- 這些策略定義了使用者的權限
- 在 AWS 中，請遵循最小權限原則：只給予使用者所需的最低權限

## 文件結構
- 包括以下內容：
    - Version：策略語言版本，必須包含 `"2012-10-17"`
    - Id：策略的識別碼（可選）
    - Statement：一個或多個獨立聲明（必填）
- 聲明包含以下部分：
    - Sid：聲明的識別碼（可選）
    - Effect：聲明是否允許或拒絕訪問（`Allow` 或 `Deny`）
    - Principal：此策略適用的帳戶/使用者/角色
    - Action：策略允許或拒絕的操作列表
    - Resource：操作適用的資源列表
    - Condition：策略生效的條件（可選）

```json
{
    "Version": "2012-10-17",
    "id": "iam",
    "Statement": [
        {
            "Sid": "1",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::123456789012:root"
            },
            "Action": "s3:*",
            "Resource": "*"
        }
    ]
}
```

## 密碼策略
- 強密碼 = 提高帳戶安全性
- 在 AWS 中，您可以設置密碼策略：
  - 設置密碼的最小長度
  - 要求具備特定字符類型：
  - 包括大寫字母
  - 小寫字母
  - 數字
  - 非字母數字字符
  - 允許所有 IAM 使用者更改自己的密碼
  - 要求使用者定期更改密碼（密碼過期）
  - 防止密碼重複使用

## MFA（多因素身份驗證）
- 使用者可以訪問您的帳戶，並可能更改配置或刪除 AWS 資源
- 您需要保護 Root 帳戶和 IAM 使用者
- MFA = 您知道的密碼 + 您擁有的安全設備
- MFA 類型包括：
  - 虛擬 MFA 設備
  - 通用第二因素（U2F）安全密鑰
  - 硬體鑰匙扣 MFA 設備
  - 適用於 AWS GovCloud（美國）的硬體鑰匙扣 MFA 設備

## 使用者如何訪問 AWS？
- 訪問 AWS 有三種方式：
  - AWS 管理控制台（受密碼 + MFA 保護）
  - AWS 命令行介面（CLI）：受訪問密鑰保護
  - AWS 軟體開發工具包（SDK）：通過代碼訪問，受訪問密鑰保護

## 角色
- 某些 AWS 服務需要代表您執行操作
- 為此，我們將為 AWS 服務分配 IAM 角色
- 常見角色：
  - EC2 實例角色
  - Lambda 函數角色
  - CloudFormation 的角色

## 安全工具
- **IAM 憑證報告**  
報告列出帳戶中所有使用者及其各種憑證的狀態
- **IAM 訪問顧問**  
訪問顧問顯示授予使用者的服務權限及這些服務的最後訪問時間。
您可以根據此信息修訂策略。

## IAM 責任分擔
- **AWS 的責任：**
  - 基礎設施（全球網絡安全）
  - 配置和漏洞分析
  - 合規性驗證
- **您的責任：**
  - 使用者、群組、角色、策略的管理與監控
  - 為所有帳戶啟用 MFA
  - 定期更換密鑰
  - 使用 IAM 工具應用適當的權限
  - 分析訪問模式並審核權限

## 總結
- **使用者**：對應於實際使用者，擁有 AWS 控制台的密碼
- **群組**：僅包含使用者
- **策略**：描述使用者或群組權限的 JSON 文件
- **角色**：用於 EC2 實例或 AWS 服務
- **安全性**：MFA + 密碼策略
- **AWS CLI**：使用命令行管理 AWS 服務
- **AWS SDK**：通過編程語言管理 AWS 服務
- **訪問密鑰**：通過 CLI 或 SDK 訪問 AWS
- **審核**：IAM 憑證報告和 IAM 訪問顧問