---

title: EC2 (Elastic Compute Cloud)
author: Kirbee
--------------

# EC2 (彈性運算雲)

## 核心功能

- **租用虛擬機器 (EC2)：** 動態配置符合需求的運算資源。
- **在虛擬驅動器上存儲數據 (EBS)：** 提供可靠且可擴展的持久化存儲選項。
- **跨機器分配負載 (ELB)：** 確保容錯能力和最佳化性能。
- **使用自動縮放組 (ASG) 進行服務縮放：** 根據需求自動調整資源規模。

---

## EC2 規模與配置選項

- **作業系統 (OS)：** Linux、Windows 或 macOS。
- **計算能力 (CPU)：** 指定核心數量和處理性能。
- **記憶體 (RAM)：** 根據應用需求選擇。
- **存儲空間：**
- **網絡附加存儲：** EBS (彈性區塊存儲)、EFS (彈性文件系統)。
- **本地存儲：** EC2 實例存儲，適用於臨時高效存儲。
- **網絡卡：** 定義速度、帶寬和公有 IP 選項。
- **安全群組 (Security Groups)：** 實現流量規則控制。
- **引導腳本：** 使用 EC2 使用者資料 (User Data) 配置首次啟動的實例。

---

## EC2 使用者資料 (User Data)

- 通過在首次啟動時執行腳本實現自動化初始化。
- **功能：**
- 安裝更新和軟體。
- 配置系統設置並下載文件。
- 為特定工作負載定制環境。
- **權限：** 以 root 使用者權限執行。

---

## EC2 實例類型

### 命名結構範例

`m5.2xlarge`

- **m：** 實例家族（分類）。
- **5：** 代數。
- **2xlarge：** 家族內的規模等級。

### 通用型 (General Purpose)

- **平衡：** 適用於需要計算、記憶體和網絡資源平衡的工作負載。
- **範例：** 網頁伺服器、代碼存儲庫。
- **典型實例：** `t2.micro`（常用於測試和教程）。

### 計算優化型 (Compute Optimized)

- **設計用途：** 高性能計算密集型任務。
- **使用場景：**
- 批處理。
- 媒體轉碼。
- 科學建模和機器學習。
- 遊戲伺服器。

### 記憶體優化型 (Memory Optimized)

- **用途：** 處理需要大量記憶體的工作負載。
- **使用場景：**
- 高性能數據庫。
- 即時數據分析。
- 記憶體內數據庫。

### 存儲優化型 (Storage Optimized)

- **設計用途：** 需要高順序 I/O 的存儲密集型任務。
- **使用場景：**
- 線上交易處理 (OLTP)。
- 數據倉儲。
- 分佈式文件系統。

---

## 安全群組 (Security Groups)

- **功能：** EC2 實例的主要網絡安全機制。
- **特點：**
- 作為有狀態防火牆。
- 控制入站和出站流量。
- 通過 IP 範圍或引用其他安全群組定義訪問規則。
- 僅允許 "允許" 規則（無明確拒絕規則）。

### 常用端口

- **22：** SSH - 安全外殼，用於 Linux 實例訪問。
- **21：** FTP - 文件上傳。
- **22：** SFTP - 通過 SSH 的安全文件上傳。
- **80：** HTTP - 非加密的網頁流量。
- **443：** HTTPS - 加密的網頁流量。
- **3389：** RDP - 遠程桌面協議，用於 Windows。

---

## EC2 實例購買選項

### 隨需實例 (On-Demand Instances)

- **靈活性：** 按秒計費（Linux/Windows）。
- **無承諾：** 成本最高，但無需預付款。
- **適合：** 短期、不可預測的工作負載。

### 預留實例 (Reserved Instances, 1 & 3 年)

- **成本效率：** 比隨需實例節省最多 72%。
- **選項：**
- **標準型：** 固定屬性（如實例類型、操作系統）。
- **可轉換型：** 可調整配置（如更改實例家族或地區）。
- **理想用途：** 穩定狀態應用程序，如數據庫。

### 儲蓄計畫 (Savings Plans)

- **折扣：** 與預留實例相似，節省最多 72%。
- **靈活性：** 適用於多種實例規模和操作系統。
- **承諾：** 基於 1 或 3 年的每小時使用量。

### 零星實例 (Spot Instances)

- **最低成本：** 比隨需實例低最多 90%。
- **注意事項：** 當價格超過競標價格時，實例可能被終止。
- **使用場景：**
- 批量處理。
- 數據分析。
- 圖像渲染和分佈式工作負載。
- 非關鍵性任務。

### 專用主機 (Dedicated Hosts)

- **專屬訪問：** 完全專用於您的實體服務器。
- **優勢：**
- 控制實例放置。
- 滿足特定許可證模型（自帶許可證，BYOL）。
- **使用場景：**
- 法規環境。
- 複雜許可證的軟體。

### 專用實例 (Dedicated Instances)

- **硬件隔離：** 實例運行於專屬於您的硬件上。
- **限制：** 無法控制實例放置。

### 容量預留 (Capacity Reservations)

- **保證訪問：** 預留特定可用區 (AZ) 的容量。
- **靈活性：** 無需時間承諾，按隨需價格計費。

#### 購買選項比較

| 選項                | 折扣    | 承諾       | 適合場景                               |
| ------------------- | ------- | ---------- | -------------------------------------- |
| 隨需實例             | 無      | 無         | 短期、靈活的工作負載                   |
| 預留實例             | 最多 72% | 1-3 年     | 穩定狀態應用                           |
| 儲蓄計畫             | 最多 72% | 1-3 年     | 長期靈活使用                           |
| 零星實例             | 最多 90% | 無         | 非關鍵性、成本敏感的工作負載           |
| 專用主機             | 無      | 可選       | 合規需求與許可證模型                   |
| 容量預留             | 無      | 無         | 預留特定 AZ 的容量                     |

---

## 共享責任模型

### AWS 的責任

- **基礎設施安全：** 全球網絡保護和實體主機隔離。
- **硬件維護：** 故障元件更換。
- **合規性驗證：** 確保符合全球標準。

### 使用者的責任

- **安全群組：** 定義和管理流量規則。
- **操作系統更新：** 定期應用補丁和更新。
- **訪問管理：** 配置 IAM 角色和使用者權限。
- **數據安全：** 實施加密和訪問控制。

---

## 結論

### 關鍵要點：

- **可定制性：** EC2 提供針對計算、記憶體和存儲需求優化的多樣實例類型。
- **靈活定價模型：** 從隨需到零星實例，定價可根據工作負載需求調整。
- **共享安全性：** AWS 負責基礎設施，使用者管理實例特定設置。

利用這些功能，可以實現針對多樣工作負載的可擴展、安全和具成本效益的雲端解決方案。

